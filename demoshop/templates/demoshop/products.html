{% extends 'demoshop/base.html' %}

{% block body_block %}
<div class="container">
   <div class="row">
     <form class="form">
       <div class="form-group">
         <select class="form-control" id="categorySelector">
           {% for category in categories %}
           {% ifequal category currentCategory %}
           <option value="{{ category }}" selected>{{ category }}</option>
           {% else %}
           <option value="{{ category }}">{{ category }}</option>
           {% endifequal %}
           {% endfor %}
         </select>
         <script>
         $(function() {
           $('#categorySelector').change(function() {
             var url = [
               window.location.protocol,
               '//',
               window.location.host,
               window.location.pathname].join('');
             window.location.href = url + '?category=' + $('#categorySelector').val();
           });
         });
         </script>
       </div>
     </form>
   </div>
   <div class="row">
    {% for product in products %}
    <div class="col-xs-12 col-sm-6 col-md-3">
      <div class="thumbnail">
        <a href="detail?id={{ product.id }}">
          <img width="100%" src="{{ product.image_link }}" alt="{{ product.title }}">
        </a>
        <div class="caption">
          <h3><a href="detail?id={{ product.id }}">{{ product.title }}</a></h3>
          <p>{{ product.description }}</p>
          <p>Price: {{ product.price }}, Availablity: {{ product.availability }}</p>
          <p><a href="addtocart?id={{ product.id }}"
                class="btn btn-primary" role="button">Buy</a></p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
